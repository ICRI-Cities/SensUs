var titleElement = document.getElementById('headTitle'+webLoc);
titleElement.innerHTML = pageTitle;


var root1 = {
      name:"",
      children: [
        {name: "Family & Friends", value: familyVals1[0], valueTotal: familyVals1[0]+familyVals1[1], user: partFamilyVals1[0]},
        {name: "City Council", value: councilVals1[0], valueTotal: councilVals1[0] +councilVals1[1], user: partCouncilVals1[0]},
        {name: "Public Good", value: publicVals1[0], valueTotal: publicVals1[0] + publicVals1[1], user: partPublicVals1[0]}
      ]
};




var root2 = {
      name:"",
      children: [
        {name: "Family & Friends", value: familyVals2[0], valueTotal: familyVals2[0]+familyVals2[1], user: partFamilyVals2[0]},
        {name: "City Council", value: councilVals2[0], valueTotal: familyVals2[0]+familyVals2[1], user: partCouncilVals2[0]},
        {name: "Public Good", value: publicVals2[0], valueTotal: familyVals2[0]+familyVals2[1], user: partPublicVals2[0]}
      ]
};


var width = 500,
    height = 500;
var radium = 400;

var pack = d3.layout.pack()
    .size([radium, radium]);



// The first circle for heredity

var svg1 = d3.select("#wrapper"+webLoc).append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + (width-radium)/2 + "," + (height-radium)/1.5 + ")");

var circle1 = svg1.selectAll("circle")
      .data(pack.nodes(root1))
    .enter().append("circle")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", function(d) { return d.r; })
      .style("fill", "grey")
        .transition()
          .duration(600)
          .delay(400)
          .style("fill", "#438DC3");

circle1.filter(function(d) { return d.user==1;})
      .transition()
        .duration(1000)
        .delay(1600)
      .style({'stroke': 'Black', 'stroke-width': '1px', "stroke-dasharray": ("10,3")});


var name1 = svg1.selectAll("circle1")
      .data(pack.nodes(root1))
    .enter().append("text").filter(function(d) {return d.name!=""&& d.value!=0;})
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .text(function(d) { return d.name; })
      .style("text-anchor", "middle")
      .style("font", "15px helvetica")
      .style("fill","black")
      .style("font-weight", 400);

var size1 = svg1.selectAll("circle1")
      .data(pack.nodes(root1))
    .enter().append("text").filter(function(d) {return d.name!=""&& d.value!=0;})
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("dy", 30)
      .text(function(d) {  return (100*d.value/d.valueTotal).toFixed(0) + "%" ; })
      .style("text-anchor", "middle")
      .style("font", "16px helvetica")
      .style("fill","black")
      .style("font-weight", 200);


var title1 = svg1.selectAll("circle1")
    .data(pack.nodes(root1))
    .enter().append("text")
    .attr("x", 80)
    .attr("y", -30)
    .text(titles1)
    .style("font", "18px helvetica")
    .style("fill","black")
    .style("font-weight", 200);
    




// The second circle for GP

var svg2 = d3.select("#wrapper"+webLoc).append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + (width-radium)/2 + "," + (height-radium)/1.5 + ")");

var circle2 = svg2.selectAll("circle")
    .data(pack.nodes(root2))
  .enter().append("circle")
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; })
    .attr("r", function(d) { return d.r; })
    .style("fill", "grey")
      .transition()
        .duration(600)
        .delay(400)
        .style("fill", "#C7E89E");

circle2.filter(function(d) { return d.user==1;})
      .transition()
        .duration(1000)
        .delay(1600)
      .style({'stroke': 'Black', 'stroke-width': '1px', "stroke-dasharray": ("10,3")});


var name2 = svg2.selectAll("circle2")
      .data(pack.nodes(root2))
    .enter().append("text").filter(function(d) {return d.name!=""&& d.value!=0;})
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .text(function(d) { return d.name; })
      .style("text-anchor", "middle")
      .style("font", "15px helvetica")
      .style("fill","black")
      .style("font-weight", 400);

var size2 = svg2.selectAll("circle2")
      .data(pack.nodes(root2))
    .enter().append("text").filter(function(d) {return d.name!=""&& d.value!=0;})
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("dy", 30)
      .text(function(d) {  return (100*d.value/d.valueTotal).toFixed(0) + "%" ; })
      .style("text-anchor", "middle")
      .style("font", "16px helvetica")
      .style("fill","black")
      .style("font-weight", 200);
    



var title2 = svg2.selectAll("circle1")
    .data(pack.nodes(root2))
    .enter().append("text")
    .attr("x", 50)
    .attr("y", -30)
    .text(titles2)
    .style("font", "18px helvetica")
    .style("fill","black")
    .style("font-weight", 200);
    